<div class="post">
<h2><img alt="" class="aligncenter size-full wp-image-4922" height="400" sizes="(max-width: 600px) 100vw, 600px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/M10-C10-Cartoon.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/M10-C10-Cartoon.png 600w, https://zerodha.com/varsity/wp-content/uploads/2018/03/M10-C10-Cartoon-300x200.png 300w" width="600"/></h2>
<h2><b>10.1 – Who is X and who is Y? </b></h2>
<p><span style="font-weight: 400;">I hope the previous chapter gave you a basic understanding of linear regression and how one can conduct the linear regression operation on two sets of data, on MS Excel. Remember, we are talking about two variables here – X and Y. </span></p>
<p><span style="font-weight: 400;">X is defined as the independent variable and Y is the dependent variable. If you’ve spent time thinking about this, then I’m certain you’d have guessed X and Y will eventually be two different stocks. </span></p>
<p><span style="font-weight: 400;">In fact, let us just go ahead and run a linear regression on two stocks – maybe HDFC Bank and ICICI Bank and see what results we get. </span></p>
<p><span style="font-weight: 400;">I’m setting ICICI Bank as X and HDFC Bank as Y. A quick note on data before we proceed –</span></p>
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">Make sure your data is clean – adjusted for splits, bonuses, and any other corporate actions</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Make sure the data matches the exact dates – for instance, the data I have for both the stocks here runs from 4</span><span style="font-weight: 400;">th</span><span style="font-weight: 400;"> of Dec 2015 to 4</span><span style="font-weight: 400;">th</span><span style="font-weight: 400;"> Dec 2017. </span></li>
</ol>
<p><span style="font-weight: 400;">Here is how the data looks –</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-1_data-1.png"><img alt="" class="aligncenter wp-image-4938" height="497" loading="lazy" sizes="(max-width: 450px) 100vw, 450px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-1_data-1.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-1_data-1.png 700w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-1_data-1-272x300.png 272w" width="450"/></a></p>
<p><span style="font-weight: 400;">I’ll run the linear regression on these two stocks (I’ve explained how to do this in the previous chapter), also do note, I’m running this on the stock prices and not really on stock returns –</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-2_on-price-1.png"><img alt="" class="aligncenter wp-image-4939" height="284" loading="lazy" sizes="(max-width: 500px) 100vw, 500px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-2_on-price-1.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-2_on-price-1.png 1067w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-2_on-price-1-300x170.png 300w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-2_on-price-1-768x436.png 768w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-2_on-price-1-1024x582.png 1024w" width="500"/></a></p>
<p><span style="font-weight: 400;">The result of the linear regression is as follows –</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-3_IH-1.png"><img alt="" class="aligncenter wp-image-4940" height="433" loading="lazy" sizes="(max-width: 700px) 100vw, 700px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-3_IH-1.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-3_IH-1.png 1255w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-3_IH-1-300x185.png 300w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-3_IH-1-768x475.png 768w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-3_IH-1-1024x633.png 1024w" width="700"/></a></p>
<p><span style="font-weight: 400;">Since ICICI is independent and HDFC is dependent, the equation is – </span></p>
<p><b><mark>HDFC = Price of ICICI * 7.613 – 663.677</mark></b></p>
<p><span style="font-weight: 400;">I’m assuming, you are familiar with the above equation. &nbsp;For those who are not familiar, I’d suggest you to read the previous two chapters. However here is the quick summary – the equation is trying to predict the price of HDFC using the price of ICICI. </span></p>
<p><span style="font-weight: 400;">Or in other words, we are trying to ‘express’ the price of HDFC in terms of ICICI. </span></p>
<p><span style="font-weight: 400;">Now, let us reverse this – I will set ICICI as dependent and HDFC as the independent. </span></p>
<p><span style="font-weight: 400;">Here is how the results look –</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-4_HI-1.png"><img alt="" class="aligncenter wp-image-4941" height="404" loading="lazy" sizes="(max-width: 600px) 100vw, 600px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-4_HI-1.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-4_HI-1.png 1051w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-4_HI-1-300x202.png 300w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-4_HI-1-768x517.png 768w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-4_HI-1-1024x689.png 1024w" width="600"/></a></p>
<p><span style="font-weight: 400;">The equation is – </span></p>
<p><b><mark>ICICI = HDFC * 0.09 + 142.4677</mark></b></p>
<p><span style="font-weight: 400;">So for the given two stocks, you can regress two ways by reordering which stock is dependent and which one is the independent variable. </span></p>
<p><span style="font-weight: 400;">However, the question is – how do you decide which one should be marked dependent and which one as independent. Or in other words, which order makes the most sense. </span></p>
<p><span style="font-weight: 400;">The answer to this depends on three things – </span></p>
<ol>
<li style="list-style-type: none;">
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">Standard Error</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Standard Error of intercept</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">The ratio of the above two variables. </span></li>
</ol>
</li>
</ol>
<p><span style="font-weight: 400;">Remember, the linear equation above, essentially express the variation of price of ICICI in terms of HDFC (refer to the equation above). This expression or explanation of the price variation of one stock by keeping the price of the other stock as a reference can never be 100%. If it was 100%, then there is no play here at all. </span></p>
<p><span style="font-weight: 400;">Having said so, the equation should be strong enough to explain the variation in price of the dependent variable as much as possible, keeping the independent variable in perspective. The stronger this is, the better it is. </span></p>
<p><span style="font-weight: 400;">This leads us to the next obvious question – how do we figure out how strong the linear regression equation is? This is where the ratio –</span></p>
<p><b><mark>Standard Error of Intercept / Standard Error</mark></b> <span style="font-weight: 400;">comes into play. &nbsp;To understand this ratio, we need to understand both the numerator and the denominator before talking about the ratio itself. </span></p>
<h2><b>10.2 – Back to residuals</b></h2>
<p><span style="font-weight: 400;">Here is the linear regression equation of ICICI as independent and HDFC as the dependent – </span></p>
<p><b><mark>HDFC = Price of ICICI * 7.613 – 663.677</mark></b></p>
<p><span style="font-weight: 400;">This essentially means, if I know the price of ICICI, I should be able to predict the price of HDFC. However, in reality, there is a difference between the predicted price of HDFC and the actual price. This difference is called the ‘Residuals’.</span></p>
<p><span style="font-weight: 400;">Here is the snapshot of the residuals when we try and explain the price of HDFC keeping ICICI as the independent variable –</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-5_residuals.png"><img alt="" class="aligncenter wp-image-4942" height="369" loading="lazy" sizes="(max-width: 600px) 100vw, 600px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-5_residuals.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-5_residuals.png 1175w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-5_residuals-300x185.png 300w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-5_residuals-768x473.png 768w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-5_residuals-1024x630.png 1024w" width="600"/></a></p>
<p><span style="font-weight: 400;">When I talk about the regression equation and the residuals, usually, I get one common question – what is the use of regression if there is a residual each and every time? Or in other words, how can we rely on an equation, which fails to predict accurately, even once. </span></p>
<p><span style="font-weight: 400;">This is a fair question. If you look at the residuals above, they vary from a low of -288 to a high of 548, so using this equation to make any sort of prediction one price is futile. </span></p>
<p><span style="font-weight: 400;">But then, this was never about predicting the price of the dependent stock, given the price of an independent stock. It was always about the residuals!</span></p>
<p><span style="font-weight: 400;">Let me give you a heads-up here – the residuals display a certain behaviour. &nbsp;If we can understand this behaviour and figure a pattern within it, then we can rework backwards to construct a trade. This trade obviously involves buying and selling the two stocks simultaneously, hence this qualifies as a pair trade. </span></p>
<p><span style="font-weight: 400;">Over the next few chapter, we will dwell deeper into this. However, for now, let’s talk about the ‘Standard Error’, the denominator in the </span><b><mark>Standard Error of Intercept / Standard Error</mark></b> <span style="font-weight: 400;">equation.</span></p>
<p><span style="font-weight: 400;">The standard error is one of the variables which gets reported when you run a linear regression operation. Here is the snapshot showing the same –</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-6_se.png"><img alt="" class="aligncenter wp-image-4943" height="149" loading="lazy" sizes="(max-width: 250px) 100vw, 250px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-6_se.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-6_se.png 332w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-6_se-300x179.png 300w" width="250"/></a></p>
<p><span style="font-weight: 400;">The standard error is defined as the standard deviation of the residuals. Remember, the residuals itself is a time series array. So if you were to calculate the standard deviation of the residuals, then you get the standard error. </span></p>
<p><span style="font-weight: 400;">In fact, let me manually calculate the standard error of the residuals, I’m doing this for X = ICICI and y = HDFC</span></p>
<p><span style="font-weight: 400;"> &nbsp;<a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-7_se-1.png"><img alt="" class="aligncenter wp-image-4944" height="343" loading="lazy" sizes="(max-width: 550px) 100vw, 550px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-7_se-1.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-7_se-1.png 883w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-7_se-1-300x187.png 300w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-7_se-1-768x479.png 768w" width="550"/></a></span></p>
<p><span style="font-weight: 400;">And excel tells me the standard deviation is </span><b>152.665</b><span style="font-weight: 400;">. The standard error as reported in the summary output is </span><b>152.819</b><span style="font-weight: 400;">. The minor difference can be ignored. </span></p>
<p><span style="font-weight: 400;">The ‘Standard Error of the Intercept’, is a little tricky. It does get reported in the regression report, and here is the standard error of the intercept with x = ICICI and y = HDFC</span></p>
<p><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-8_sei.png"><img alt="" class="aligncenter wp-image-4945" height="310" loading="lazy" sizes="(max-width: 800px) 100vw, 800px" src="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-8_sei.png" srcset="https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-8_sei.png 1077w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-8_sei-300x116.png 300w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-8_sei-768x297.png 768w, https://zerodha.com/varsity/wp-content/uploads/2018/03/Image-8_sei-1024x396.png 1024w" width="800"/></a></p>
<p><span style="font-weight: 400;">Recall, the regression equation – </span></p>
<p><span style="font-weight: 400;">y=M*x+ </span><span style="font-weight: 400;">C</span></p>
<p><span style="font-weight: 400;">Where, </span></p>
<p><span style="font-weight: 400;">M = Slope </span></p>
<p><span style="font-weight: 400;">C = Intercept</span></p>
<p><span style="font-weight: 400;">If you realize, here both M and C are estimates. And how are they estimated? They are estimated based on the historical data provided to the regression algorithm. The data can obviously contain noise components and few outliers. This implies that there is a scope for the estimates can go wrong. </span></p>
<p><span style="font-weight: 400;">The Standard Error of the Intercept is the measure of the variance of estimated intercept. It helps up understand by what degree the intercept itself can vary. So in a sense, this is somewhat similar to the ‘Standard Error’ itself. To summarize –</span></p>
<ul>
<li style="font-weight: 400;"><span style="font-weight: 400;">Standard Error of Intercept – The variance of the intercept</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Standard Error – The variance of the residuals. </span></li>
</ul>
<p><span style="font-weight: 400;">Now that we have defined both these variables, let’s bring back the ‘Error Ratio’. Please note, the term ‘Error Ratio’ is not a standard term, I’ve come up with it for ease of understanding. </span></p>
<p><span style="font-weight: 400;">Anyway, the error ratio, as we know –</span></p>
<p><b>Error Ratio = Standard Error of Intercept / Standard Error</b></p>
<p><span style="font-weight: 400;">I’m calculated the same for –</span></p>
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">ICICI as X and HDFC as y = 0.401</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">HDFC as X and ICICI as y = 0.227</span></li>
</ol>
<p><span style="font-weight: 400;">The decision to designate X and Y to stocks depends on the value of the error ratio. The lower the better. Since HDFC as X and ICICI as y offers the lowest error ratio, we will designate HDFC as the independent variable (X) and ICICI as the dependent variable (Y). </span></p>
<p><span style="font-weight: 400;">I’d love to explain the reason as to why we are using the error ratio as the key input for designating X and Y, but I guess I will hold back. I’ll revisit this again when I take up pair trade example. </span></p>
<p><span style="font-weight: 400;">For now, remember to calculate the error ratio and estimate which stock should be dependent and which one will be the independent. </span></p>
<p><span style="font-weight: 400;">You can download the excel sheet used in this chapter </span><a href="https://zerodha.com/varsity/wp-content/uploads/2018/03/Chapter-10_Residuals.xlsx"><b>here</b></a><span style="font-weight: 400;">.</span></p>
<p>&nbsp;</p>
<h2><b>Key takeaways from the this chapter </b></h2>
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">X is the independent stock and Y is the dependent stock</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">The decision to figure out which stock is X and which one should be Y depends on ‘Error Ratio’</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Both the slope and the intercept from the linear regression equation are estimates</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Error Ratio = Standard Error of the Intercept / Standard Error</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Standard error is the standard deviation of the residuals</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Standard error of intercept gives you a sense of the variance of the intercept</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Regress Stock 1 with Stock 2 and also Stock 2 with Stock 1, whichever offers the lowest error ratio defines which stock is dependent and which one is independent</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Residuals display certain properties, studying which can help identify pair trading pattern</span></li>
</ol>
<div class="clear"> </div>
</div>